var canvas,grid_size,maxVerticalLines,numHorizontalLines,bgMode,strokeMode,mouseMoveTimeout,responsiveMode,mouseMovedCounter,mouseMovedFlag,maxMouseMovedCounter,xOffset,yOffset,maxOffset,offset,prevTop,prevBottom,prevLeft,prevRight,vidPlaying=!1,minWidth=600,h=1024;function setup(){frameRate(60),resize(),(canvas=createCanvas(windowWidth+2,h+20)).position(0,0),canvas.style("z-index","-1"),$(".gif").each(function(e){$(this).attr("src",$(this).attr("data-src"))}),$(function(){var e=$(document);e.bind("scroll",function(){for(var i=document.getElementsByClassName("gif"),o=0;o<i.length;o++){var s=i[o],d=s.getBoundingClientRect();d.top+d.height>=0&&d.bottom-d.height<=(window.innerHeight||document.documentElement.clientHeight)?s.paused&&s.play():s.paused||s.pause()}0!==e.scrollLeft()&&e.scrollLeft(0)})}),$(".title-fluid").bind("mouseover",onHoverFluid).bind("mouseout",onLeaveFluid);var e=document.getElementById("vid");isMobile()?(document.getElementById("vid-placeholder").setAttribute("src","../../assets/img/vid-motion-sm.png"),e.addEventListener("playing",function(){$("#play-btn").css("visibility","hidden"),vidPlaying=!0}),e.addEventListener("pause",function(){$("#pause-btn").css("visibility","hidden"),$("#play-btn").css("visibility","visible"),vidPlaying=!1}),e.addEventListener("ended",function(){$("#vid-placeholder").css("z-index","2"),$("#play-btn").css("visibility","visible")}),$("#vid-wrapper").click(function(){vidPlaying?e.pause():(e.play(),$("#vid-placeholder").css("z-index","-1"))})):(e.addEventListener("playing",function(){$("#play-btn").css("visibility","hidden"),vidPlaying=!0}),e.addEventListener("pause",function(){$("#pause-btn").css("visibility","hidden"),vidPlaying=!1}),e.addEventListener("ended",function(){$("#vid-placeholder").css("z-index","2"),$("#play-btn").css("visibility","visible")}),$("#play-btn").click(function(){e.play(),$("#vid-placeholder").css("z-index","-1")}),$("#pause-btn").click(function(){e.pause()}),$("#vid-wrapper").bind("mouseover",()=>{vidPlaying?$("#pause-btn").css("visibility","visible"):$("#play-btn").css("visibility","visible")}),$("#vid-wrapper").bind("mouseout",()=>{$("#pause-btn").css("visibility","hidden"),$("#play-btn").css("visibility","hidden")})),bgMode=49,strokeMode=255,mouseMovedFlag=0,mouseMovedCounter=0,maxMouseMovedCounter=25,offset=maxOffset=1.2,prevTop=0,prevBottom=0,prevLeft=0,prevRight=0,strokeWeight(.5),background(bgMode),stroke(strokeMode),noLoop()}function draw(){background(bgMode),stroke(strokeMode);var e=grid_size*Math.floor(mouseY/grid_size),i=e+grid_size+3,o=grid_size*Math.floor(mouseX/grid_size),s=o+grid_size+3;e===prevTop&&i==prevBottom&&o==prevLeft&&s==prevRight?(0==mouseMovedFlag&&(mouseMovedFlag=1),1==mouseMovedFlag&&mouseMovedCounter<maxMouseMovedCounter&&(mouseMovedCounter++,offset=map(mouseMovedCounter,0,maxMouseMovedCounter,maxOffset,0))):(console.log("resetting"),mouseMovedFlag=0,mouseMovedCounter=0,offset=maxOffset);for(var d=grid_size;d<windowWidth;d+=grid_size)1==responsiveMode?d>9*grid_size+1&&d<14*grid_size-1?(line(d,0,d,grid_size),line(d,14*grid_size,d,15*grid_size),line(d,33*grid_size,d,h+20)):d>=grid_size&&d<=3*grid_size?line(d,0,d,h-grid_size):line(d,0,d,h+20):0==responsiveMode&&(d==2*grid_size?(line(d,0,d,2*grid_size),line(d,10*grid_size,d,11*grid_size),line(d,20*grid_size,d,h-2*grid_size)):d==grid_size?line(d,0,d,h-2*grid_size):d>=3*grid_size&&d<windowWidth+20?(line(d,0,d,2*grid_size),line(d,10*grid_size,d,11*grid_size),line(d,20*grid_size,d,h+20)):line(d,0,d,h+20));for(var n=grid_size;n<h-1;n+=grid_size)1==responsiveMode?n>grid_size&&n<=5*grid_size||n>=19*grid_size+1&&n<=21*grid_size-1||n>=25*grid_size+1&&n<=27*grid_size-1||n>=31*grid_size+1&&n<=33*grid_size-1?(line(0,n,9*grid_size,n),line(14*grid_size,n,windowWidth,n)):line(0,n,windowWidth,n):0==responsiveMode&&(n>2*grid_size&&n<=7*grid_size?line(0,n,grid_size,n):n>h-grid_size-1?line(3*grid_size,n,windowWidth,n):line(0,n,windowWidth,n));if(1==mouseMovedFlag&&mouseMovedCounter<maxMouseMovedCounter){if(1==responsiveMode&&(o>=9*grid_size&&s<=15*grid_size&&e>=grid_size&&i<=grid_size*(numHorizontalLines-2)||o>=0&&s<=5*grid_size&&e>=(numHorizontalLines-1)*grid_size)||0==responsiveMode&&(o>=grid_size&&s<windowWidth+10&&e>=2*grid_size&&i<=21*grid_size||o>=0&&s<=3*grid_size+10&&e>=(numHorizontalLines-2)*grid_size))return;fill(bgMode),stroke(bgMode),rect(o-1,e-1,grid_size+2,grid_size+2),stroke(strokeMode),xOffset=0,yOffset=0;for(d=o;d<=s;d+=grid_size)for(n=e;n<i;n++)1==int(random(0,10))&&(xOffset+=random(-offset,offset)),point(d+xOffset,n);for(n=e;n<=i;n+=grid_size)for(d=o;d<s;d++)1==int(random(0,10))&&(yOffset+=random(-offset,offset)),point(d,n+yOffset)}0==mouseMovedFlag&&(prevTop=e,prevBottom=i,prevLeft=o,prevRight=s)}function onHoverFluid(){bgMode=255,strokeMode=0,$("body").removeClass("darkmode").addClass("lightmode"),loop()}function onLeaveFluid(){bgMode=49,strokeMode=255,$("body").removeClass("lightmode").addClass("darkmode"),noLoop()}function resize(){windowWidth<=minWidth?(responsiveMode=0,maxVerticalLines=5,numHorizontalLines=27):(responsiveMode=1,maxVerticalLines=15,numHorizontalLines=36),grid_size=windowWidth/maxVerticalLines,h=grid_size*numHorizontalLines}function mouseMoved(){loop(),clearTimeout(mouseMoveTimeout),mouseMoveTimeout=setTimeout(()=>{noLoop()},maxMouseMovedCounter/frameRate()*1e3)}function windowResized(){resize(),resizeCanvas(windowWidth+2,h+20)}function isMobile(){return!!new MobileDetect(window.navigator.userAgent).mobile()}$(window).load(function(){$("#hide-all").css("display","block")});